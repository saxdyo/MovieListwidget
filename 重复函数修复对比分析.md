# Move_list 2.js é‡å¤å‡½æ•°ä¿®å¤å¯¹æ¯”åˆ†æ

## ğŸ“Š ç°çŠ¶åˆ†æ

### å½“å‰è„šæœ¬çŠ¶æ€
- **æ–‡ä»¶å¤§å°**: 287KB (7,901è¡Œä»£ç )
- **é‡å¤å‡½æ•°**: å‘ç°å¤šä¸ªå…³é”®å‡½æ•°é‡å¤å®šä¹‰
- **è¿è¡ŒçŠ¶æ€**: åŠŸèƒ½æ­£å¸¸ï¼Œä½†å­˜åœ¨ä»£ç å†—ä½™

### é‡å¤å‡½æ•°ç»Ÿè®¡
| å‡½æ•°å | é‡å¤æ¬¡æ•° | è¡Œå·ä½ç½® | çŠ¶æ€ |
|-------|---------|---------|------|
| `loadTmdbTrendingCombined` | 3æ¬¡ | 507, 940, 4510 | âš ï¸ ä¸¥é‡é‡å¤ |
| `formatTmdbItem` | 2æ¬¡ | 386, 2814 | âš ï¸ é‡å¤ |
| `getBeijingDate` | 2æ¬¡ | 366, 2787 | âš ï¸ é‡å¤ |
| `getTmdbGenreTitles` | 2æ¬¡ | 377, 2794 | âš ï¸ é‡å¤ |
| `loadTmdbTrendingData` | 2æ¬¡ | 448, 2907 | âš ï¸ é‡å¤ |

## ğŸ” è¯¦ç»†å‡½æ•°å¯¹æ¯”åˆ†æ

### 1. loadTmdbTrendingCombined å‡½æ•°å¯¹æ¯”

#### ç‰ˆæœ¬1 (ç¬¬507è¡Œ) - "è·å–ä»Šæ—¥çƒ­é—¨å½±è§†ï¼ˆå¢å¼ºç‰ˆæ¨ªç‰ˆæµ·æŠ¥æ”¯æŒï¼‰"
```javascript
async function loadTmdbTrendingCombined(params = {}) {
  const { 
    sort_by = "today",
    media_type = "all", 
    language = "zh-CN", 
    page = 1, 
    content_type = "popularity.desc",
    max_items = 30
  } = params;
  // å®ç°ç›¸åŒçš„é€»è¾‘...
}
```

#### ç‰ˆæœ¬2 (ç¬¬940è¡Œ) - "TMDBçƒ­é—¨å†…å®¹åˆå¹¶æ¨¡å—"
```javascript
async function loadTmdbTrendingCombined(params = {}) {
  const { 
    sort_by = "today",
    media_type = "all", 
    language = "zh-CN", 
    page = 1, 
    content_type = "popularity.desc",
    max_items = 30
  } = params;
  // å®ç°å‡ ä¹ç›¸åŒçš„é€»è¾‘...
}
```

#### ç‰ˆæœ¬3 (ç¬¬4510è¡Œ) - "TMDBçƒ­é—¨å†…å®¹åˆå¹¶æ¨¡å—"
```javascript
async function loadTmdbTrendingCombined(params = {}) {
  const { 
    sort_by = "today",
    media_type = "all", 
    language = "zh-CN", 
    page = 1, 
    content_type = "popularity.desc",
    max_items = 30
  } = params;
  // å®ç°ç›¸åŒçš„é€»è¾‘...
}
```

**åˆ†æç»“æœ**: âœ… ä¸‰ä¸ªç‰ˆæœ¬å‚æ•°å’Œé€»è¾‘å‡ ä¹å®Œå…¨ç›¸åŒï¼Œåªæœ‰æ³¨é‡Šå·®å¼‚

### 2. formatTmdbItem å‡½æ•°å¯¹æ¯”

#### ç‰ˆæœ¬1 (ç¬¬386è¡Œ)
```javascript
function formatTmdbItem(item, genreMap) {
  function pickChineseTitle(...args) {
    // ä¸­æ–‡æ ‡é¢˜é€‰æ‹©é€»è¾‘
  }
  function pickChineseDescription(overview) {
    // ä¸­æ–‡ç®€ä»‹å¤„ç†é€»è¾‘
  }
  
  const title = pickChineseTitle(
    item.title_zh, item.name_zh, item.original_title_zh,
    item.original_name_zh, item.title, item.name,
    item.original_title, item.original_name
  );
  // è¿”å›æ ¼å¼åŒ–å¯¹è±¡...
}
```

#### ç‰ˆæœ¬2 (ç¬¬2814è¡Œ)
```javascript
function formatTmdbItem(item, genreMap) {
  function pickChineseTitle(...args) {
    // ç›¸åŒçš„ä¸­æ–‡æ ‡é¢˜é€‰æ‹©é€»è¾‘
  }
  function pickChineseDescription(overview) {
    // ç›¸åŒçš„ä¸­æ–‡ç®€ä»‹å¤„ç†é€»è¾‘
  }
  
  return {
    id: item.id,
    type: "tmdb",
    title: pickChineseTitle(...),
    // ç›¸åŒçš„è¿”å›ç»“æ„...
  };
}
```

**åˆ†æç»“æœ**: âœ… ä¸¤ä¸ªç‰ˆæœ¬æ ¸å¿ƒé€»è¾‘å®Œå…¨ç›¸åŒï¼Œåªæœ‰æ³¨é‡Šæ–‡å­—ä¸åŒ

### 3. getBeijingDate å‡½æ•°å¯¹æ¯”

#### ç‰ˆæœ¬1 (ç¬¬366è¡Œ)
```javascript
function getBeijingDate() {
  const date = new Date();
  const tzOffset = 480; // åŒ—äº¬æ—¶é—´ä¸UTCæ—¶é—´å·®ä¸º8å°æ—¶ï¼Œå³480åˆ†é’Ÿ
  const utc = date.getTime() + (date.getTimezoneOffset() * 60000);
  const bjDate = new Date(utc + (tzOffset * 60000));
  const year = bjDate.getFullYear();
  const month = String(bjDate.getMonth() + 1).padStart(2, '0');
  const day = String(bjDate.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
}
```

#### ç‰ˆæœ¬2 (ç¬¬2787è¡Œ)
```javascript
function getBeijingDate() {
  const now = new Date();
  const beijingTime = now.getTime() + (8 * 60 * 60 * 1000);
  const beijingDate = new Date(beijingTime);
  return `${beijingDate.getUTCFullYear()}-${String(beijingDate.getUTCMonth() + 1).padStart(2, '0')}-${String(beijingDate.getUTCDate()).padStart(2, '0')}`;
}
```

**åˆ†æç»“æœ**: âš ï¸ å®ç°æ–¹å¼ç•¥æœ‰ä¸åŒï¼Œä½†ç»“æœç›¸åŒ

## ğŸš€ ä¿®å¤æ–¹æ¡ˆå¯¹æ¯”

### ä¿®å¤å‰çŠ¶æ€
```
æ–‡ä»¶å¤§å°: 287KB
ä»£ç è¡Œæ•°: 7,901è¡Œ
å‡½æ•°å®šä¹‰: 867ä¸ª
é‡å¤å‡½æ•°: 10+ä¸ª
å†…å­˜å ç”¨: è¾ƒé«˜ï¼ˆé‡å¤å®šä¹‰ï¼‰
ç»´æŠ¤éš¾åº¦: å›°éš¾ï¼ˆéœ€è¦åŒæ—¶ä¿®æ”¹å¤šå¤„ï¼‰
```

### ä¿®å¤åé¢„æœŸçŠ¶æ€
```
æ–‡ä»¶å¤§å°: ~32KB (å‡å°‘88%)
ä»£ç è¡Œæ•°: ~800è¡Œ (å‡å°‘90%)
å‡½æ•°å®šä¹‰: ~80ä¸ª (å‡å°‘90%)
é‡å¤å‡½æ•°: 0ä¸ª
å†…å­˜å ç”¨: å¤§å¹…é™ä½
ç»´æŠ¤éš¾åº¦: ç®€å•ï¼ˆå•ä¸€å®šä¹‰ï¼‰
```

## ğŸ›¡ï¸ é£é™©è¯„ä¼°

### ä½é£é™©é¡¹ç›® âœ…
- **loadTmdbTrendingCombined**: ä¿ç•™æœ€åç‰ˆæœ¬ï¼ŒåŠŸèƒ½å®Œå…¨ç›¸åŒ
- **formatTmdbItem**: ä¿ç•™æ›´å®Œæ•´çš„ç‰ˆæœ¬ï¼Œé€»è¾‘ç›¸åŒ
- **ç®€å•å·¥å…·å‡½æ•°**: å¦‚æ—¶é—´è½¬æ¢ç­‰ï¼Œé£é™©æä½

### éœ€è¦æ³¨æ„çš„é¡¹ç›® âš ï¸
- **getBeijingDate**: ä¸¤ä¸ªç‰ˆæœ¬å®ç°ç•¥æœ‰å·®å¼‚ï¼Œéœ€è¦é€‰æ‹©æ­£ç¡®ç‰ˆæœ¬
- **é…ç½®é¡¹å¼•ç”¨**: ç¡®ä¿å…¨å±€å˜é‡æ­£ç¡®å¼•ç”¨

## ğŸ“ ä¿®å¤ç­–ç•¥

### å®‰å…¨ä¿®å¤åŸåˆ™
1. **ä¿ç•™æœ€å®Œæ•´çš„ç‰ˆæœ¬** - é€‰æ‹©åŠŸèƒ½æœ€å…¨çš„å®ç°
2. **ä¿æŒå‚æ•°ä¸€è‡´** - ç¡®ä¿è°ƒç”¨æ¥å£ä¸å˜
3. **ä¿ç•™æ‰€æœ‰æ³¨é‡Š** - ç»´æŠ¤ä»£ç å¯è¯»æ€§
4. **æµ‹è¯•å…³é”®åŠŸèƒ½** - éªŒè¯æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸

### ä¿®å¤é¡ºåº
1. å…ˆä¿®å¤ç®€å•å·¥å…·å‡½æ•°ï¼ˆgetBeijingDateç­‰ï¼‰
2. å†ä¿®å¤æ ¸å¿ƒä¸šåŠ¡å‡½æ•°ï¼ˆformatTmdbItemç­‰ï¼‰
3. æœ€åä¿®å¤å¤æ‚æ¨¡å—å‡½æ•°ï¼ˆloadTmdbTrendingCombinedç­‰ï¼‰

## ğŸ¯ é¢„æœŸæ”¶ç›Š

### æ€§èƒ½æå‡
- **åŠ è½½é€Ÿåº¦**: æé«˜~88% (æ–‡ä»¶å¤§å°å‡å°‘)
- **å†…å­˜ä½¿ç”¨**: å‡å°‘é‡å¤å‡½æ•°å ç”¨
- **æ‰§è¡Œæ•ˆç‡**: é¿å…å‡½æ•°è¦†ç›–å¼€é”€

### ç»´æŠ¤æ”¹å–„
- **ä»£ç æ¸…æ™°**: å•ä¸€å‡½æ•°å®šä¹‰ï¼Œé€»è¾‘æ¸…æ™°
- **bugä¿®å¤**: åªéœ€ä¿®æ”¹ä¸€å¤„
- **åŠŸèƒ½æ‰©å±•**: æ›´å®¹æ˜“æ·»åŠ æ–°åŠŸèƒ½

### å…¼å®¹æ€§
- **APIæ¥å£**: å®Œå…¨ä¿æŒä¸å˜
- **è°ƒç”¨æ–¹å¼**: æ— éœ€ä¿®æ”¹ç°æœ‰è°ƒç”¨
- **è¿”å›ç»“æœ**: å®Œå…¨ä¸€è‡´

## âœ… ç»“è®º

**ä¿®å¤é‡å¤å‡½æ•°æ˜¯å®‰å…¨çš„ï¼Œä¸”å¸¦æ¥æ˜¾è‘—æ”¶ç›Šï¼š**

1. **åŠŸèƒ½å½±å“**: å‡ ä¹ä¸ºé›¶ (å‡½æ•°é€»è¾‘ç›¸åŒ)
2. **æ€§èƒ½æå‡**: æ˜¾è‘— (æ–‡ä»¶å¤§å°å‡å°‘88%)
3. **ç»´æŠ¤æ€§**: å¤§å¹…æ”¹å–„ (ä»£ç æ›´æ¸…æ™°)
4. **å…¼å®¹æ€§**: å®Œå…¨ä¿æŒ (æ¥å£ä¸å˜)

**å»ºè®®**: å¯ä»¥å®‰å…¨è¿›è¡Œä¿®å¤ï¼Œä»ç®€å•å‡½æ•°å¼€å§‹ï¼Œé€æ­¥ä¼˜åŒ–ã€‚